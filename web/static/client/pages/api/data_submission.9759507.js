(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{387:function(t,e,n){"use strict";n.r(e);var o={data:function(){return{form:{p_id:"",t_id:"",username:"",cycle_desc:""},file:"",username:""}},created:function(){this.init_data()},methods:{init_data:function(){var t=this;this.$axios.$get("/auth/login/").then((function(e){var n=e.data;console.log(n),t.username=n.username})).catch((function(t){console.log(t.response.data)}))},adminLogin:function(){var t=this;this.$axios.$post("/auth/login/",{username:"张三",password:"pw123456"}).then((function(e){var n=e.data;console.log(n),t.username=n.username})).catch((function(t){console.log(t.response.data)}))},auditorLogin:function(){var t=this;this.$axios.$post("/auth/login/",{username:"王五",password:"pw123456"}).then((function(e){var n=e.data;console.log(n),t.username=n.username})).catch((function(t){console.log(t.response.data)}))},systemUserLogout:function(){var t=this;this.$axios.$delete("/auth/login/").then((function(e){var n=e.data;console.log(n),t.username=""})).catch((function(t){console.log(t.response.data)}))},createProject:function(){this.$axios.$post("".concat("","/project/"),{managers:["李四","王五"],name:"报送项目1",description:"项目描述1",status:"enabled",submitters:{username1:"pw123456",username2:"pw123456",username3:"pw123456",username4:"pw123456",username5:"pw123456"}}).then((function(t){return console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},getProjectList:function(){this.$axios.$get("".concat("","/project/")).then((function(t){return console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},getProject:function(){this.$axios.$get("".concat("","/project/?p_id=").concat(this.form.p_id)).then((function(t){return console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},updateProject:function(){this.$axios.$put("".concat("","/project/"),{p_id:this.form.p_id,name:"项目报送1更新",description:"项目描述1更新",managers:["李四"],submitters:{username1:"pw123456"},status:"disabled"}).then((function(t){return console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},deleteProject:function(){this.$axios.$delete("".concat("","/project/?p_id=").concat(this.form.p_id)).then((function(t){return console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},createTask:function(){this.file=this.$refs.file.files[0];var t=new FormData;t.append("p_id",this.form.p_id),t.append("name","任务4"),t.append("description","任务描述4"),t.append("date_desc","批次日期描述4"),t.append("format_desc","批次格式描述4"),t.append("columns",JSON.stringify({name:{c_type:"string",c_desc:"string字段描述"},desc:{c_type:"text",c_desc:"text字段描述"},age:{c_type:"number",c_desc:"number字段描述"},submit_date:{c_type:"date",c_desc:"date字段描述"},submit_time:{c_type:"datetime",c_desc:"datetime字段描述"}})),t.append("s_type","excel"),t.append("excel_file",this.file),t.append("status","enabled"),this.$axios.$post("".concat("","/task/"),t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){return console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},updateTask:function(){this.file=this.$refs.file.files[0];var t=new FormData;t.append("p_id",this.form.p_id),t.append("t_id",this.form.t_id),t.append("name","任务1更新"),t.append("description","任务描述1更新"),t.append("date_desc","批次日期描述更新"),t.append("format_desc","批次格式描述更新"),t.append("columns",JSON.stringify({name:"string",age:"number"})),t.append("s_type","excel"),t.append("excel_file",this.file),t.append("status","enabled"),this.$axios.$put("".concat("","/task/"),t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){return console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},getTaskList:function(){this.$axios.$get("".concat("","/task/?p_id=").concat(this.form.p_id)).then((function(t){return console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},getTask:function(){this.$axios.$get("".concat("","/task/?p_id=").concat(this.form.p_id,"&t_id=").concat(this.form.t_id)).then((function(t){return console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},deleteTask:function(){this.$axios.$delete("".concat("","/task/?p_id=").concat(this.form.p_id,"&t_id=").concat(this.form.t_id)).then((function(t){return console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},createCycle:function(){this.$axios.$post("/cycle/",{p_id:this.form.p_id,t_id:this.form.t_id,description:"任务批次/周期描述1",status:"enabled"}).then((function(t){console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},updateCycle:function(){this.$axios.$put("/cycle/",{p_id:this.form.p_id,t_id:this.form.t_id,c_id:this.form.c_id,description:"任务批次描述更新",status:"disabled"}).then((function(t){return console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},getCycleList:function(){this.$axios.$get("/cycle/?p_id=".concat(this.form.p_id,"&t_id=").concat(this.form.t_id)).then((function(t){return console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},getCycle:function(){this.$axios.$get("/cycle/?p_id=".concat(this.form.p_id,"&t_id=").concat(this.form.t_id,"&c_id=").concat(this.form.c_id)).then((function(t){return console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},deleteCycle:function(){this.$axios.$delete("/cycle/",{data:{p_id:this.form.p_id,t_id:this.form.t_id,c_id:this.form.c_id}}).then((function(t){return console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},passSubmission:function(){this.$axios.$post("".concat("","/submission/dm/"),{command:"ds_audit",parameters:{p_id:this.form.p_id,t_id:this.form.t_id,username:this.form.username,cycle_desc:this.form.cycle_desc,status:"passed"}}).then((function(t){console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},rejectSubmission:function(){this.$axios.$post("".concat("","/submission/dm/"),{command:"ds_audit",parameters:{p_id:this.form.p_id,t_id:this.form.t_id,username:this.form.username,cycle_desc:this.form.cycle_desc,status:"rejected"}}).then((function(t){console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},querySubmissions:function(){this.$axios.$post("".concat("","/submission/dm/"),{command:"query_submissions",parameters:{p_id:this.form.p_id,t_id:this.form.t_id}}).then((function(t){console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},queryRecords:function(){this.$axios.$post("".concat("","/submission/dm/"),{command:"query_records",parameters:{p_id:this.form.p_id,t_id:this.form.t_id}}).then((function(t){console.log(t.data)})).catch((function(t){console.log(t.response.data)}))},downloadExcelSubmission:function(){this.$axios.$get("".concat("","/submission/downLoad/?command=download_excel_submission&parameters=").concat(JSON.stringify({p_id:this.form.p_id,t_id:this.form.t_id,username:this.form.username,cycle_desc:this.form.cycle_desc}))).then((function(t){console.log(t.data)})).catch((function(t){console.log(t.response.data)}))}}},c=n(48),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container mt-3"},[n("h1",{staticClass:"text-center"},[t._v("==========数据报送项目管理后台UI==========")]),t._v(" "),n("div",{staticClass:"mb-3",class:t.username?"text-success":"text-danger"},[t._v("\n    "+t._s(t.username?t.username+"已登录！":"请登录后操作！")+"\n  ")]),t._v(" "),n("div",{staticClass:"border"},[n("h3",{staticClass:"text-center"},[t._v("自定义参数表单")]),t._v(" "),n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"0px"}},[n("el-form-item",[n("el-input",{staticClass:"w-50 my-3",attrs:{placeholder:"请输入项目id",size:"medium"},model:{value:t.form.p_id,callback:function(e){t.$set(t.form,"p_id",e)},expression:"form.p_id"}})],1),t._v(" "),n("el-form-item",[n("el-input",{staticClass:"w-50 mb-3",attrs:{labe:"label",placeholder:"请输入任务id",size:"medium"},model:{value:t.form.t_id,callback:function(e){t.$set(t.form,"t_id",e)},expression:"form.t_id"}})],1),t._v(" "),n("el-form-item",[n("el-input",{staticClass:"w-50 mb-3",attrs:{labe:"label",placeholder:"请输入数据报送用户名",size:"medium"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),n("el-form-item",[n("el-input",{staticClass:"w-50 mb-3",attrs:{labe:"label",placeholder:"请输入批次",size:"medium"},model:{value:t.form.cycle_desc,callback:function(e){t.$set(t.form,"cycle_desc",e)},expression:"form.cycle_desc"}})],1),t._v(" "),n("el-form-item",[n("el-input",{staticClass:"w-50 mb-3",attrs:{labe:"label",placeholder:"请输入审批状态",size:"medium"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],1)],1),t._v(" "),n("div",{staticClass:"border mt-3 p-3"},[n("h3",[t._v("数据报送项目管理接口列表")]),t._v(" "),n("div",{staticClass:"border p-3"},[n("h5",[t._v("登录(/auth/)：")]),t._v(" "),n("el-button",{staticClass:"w-10",attrs:{type:"primary"},on:{click:t.adminLogin}},[t._v("\n        管理员登入\n      ")]),t._v(" "),n("el-button",{staticClass:"w-10",attrs:{type:"primary"},on:{click:t.auditorLogin}},[t._v("\n        审查员登入\n      ")]),t._v(" "),n("el-button",{staticClass:"w-10",attrs:{type:"primary"},on:{click:t.systemUserLogout}},[t._v("\n        登出\n      ")])],1),t._v(" "),n("div",{staticClass:"border p-3"},[n("h5",[t._v("项目(/project/)：")]),t._v(" "),n("el-button",{staticClass:"w-10 ml-4",attrs:{type:"primary"},on:{click:t.createProject}},[t._v("\n        创建\n      ")]),t._v(" "),n("el-button",{staticClass:"w-10",attrs:{type:"primary"},on:{click:t.getProjectList}},[t._v("\n        查询列表\n      ")]),t._v(" "),n("el-button",{staticClass:"w-10",attrs:{type:"primary"},on:{click:t.getProject}},[t._v("\n        查询单个\n      ")]),t._v(" "),n("el-button",{staticClass:"w-10",attrs:{type:"primary"},on:{click:t.updateProject}},[t._v("\n        更新\n      ")]),t._v(" "),n("el-button",{staticClass:"w-10",attrs:{type:"primary"},on:{click:t.deleteProject}},[t._v("\n        删除\n      ")])],1),t._v(" "),n("div",{staticClass:"border p-3"},[n("h5",[t._v("任务(/task/)：")]),t._v(" "),n("el-button",{staticClass:"w-10 ml-5",attrs:{type:"primary"},on:{click:t.createTask}},[t._v("\n        创建\n      ")]),t._v(" "),n("label",{staticClass:"bg-success"},[t._v("excel文件提交")]),t._v(" "),n("input",{ref:"file",attrs:{id:"file",type:"file"}}),t._v(" "),n("el-button",{staticClass:"w-10",attrs:{type:"primary"},on:{click:t.getTaskList}},[t._v("\n        查询列表\n      ")]),t._v(" "),n("el-button",{staticClass:"w-10",attrs:{type:"primary"},on:{click:t.getTask}},[t._v("\n        查询单个\n      ")]),t._v(" "),n("el-button",{staticClass:"w-10",attrs:{type:"primary"},on:{click:t.updateTask}},[t._v("\n        更新\n      ")]),t._v(" "),n("el-button",{staticClass:"w-10",attrs:{type:"primary"},on:{click:t.deleteTask}},[t._v("\n        删除\n      ")])],1),t._v(" "),n("h1",{staticClass:"text-center"},[t._v("==========数据管理接口==========")]),t._v(" "),n("div",{staticClass:"border"}),t._v(" "),n("div",{staticClass:"border p-3"},[n("h5",[t._v("数据管理(/submission/dm/)：")]),t._v(" "),n("el-button",{staticClass:"w-10 ml-5",attrs:{type:"primary"},on:{click:t.passSubmission}},[t._v("\n        审核通过\n      ")]),t._v(" "),n("el-button",{staticClass:"w-10",attrs:{type:"primary"},on:{click:t.rejectSubmission}},[t._v("\n        审核驳回\n      ")]),t._v(" "),n("el-button",{staticClass:"w-10",attrs:{type:"primary"},on:{click:t.querySubmissions}},[t._v("\n        查询报送概览\n      ")]),t._v(" "),n("el-button",{staticClass:"w-10",attrs:{type:"primary"},on:{click:t.queryRecords}},[t._v("\n        查询数据详情\n      ")]),t._v(" "),n("el-button",{staticClass:"w-10",attrs:{type:"primary"},on:{click:t.downloadExcelSubmission}},[t._v("\n        下载execl报送数据\n      ")])],1)])])}),[],!1,null,"818850b6",null);e.default=component.exports}}]);