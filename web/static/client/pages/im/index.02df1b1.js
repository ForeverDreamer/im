(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{385:function(t,e,n){"use strict";n.r(e);var o={name:"Index",data:function(){return{socket:null,current_msg:"",received_msg_arr:[]}},computed:{received_msgs:function(){return this.received_msg_arr.map((function(t){return t.msg})).join("\n")}},mounted:function(){this.init_data()},methods:{init_data:function(){var t=this;this.socket=this.$socketIo("http://localhost:5000/events",{}),this.socket.on("connect",(function(){console.log("连接")})),this.socket.on("disconnect",(function(){console.log("断开连接, 请登录后操作")})),this.socket.on("data",(function(e,n){t.received_msg_arr.push(e),n&&n()})),this.socket.on("error",(function(t){console.log(t.code),console.log(t.msg)}))},sendMsg:function(){this.current_msg&&(this.socket.emit("data",this.current_msg),this.current_msg="")},enterLobby:function(){this.socket.emit("join_room",{username:"阿升"+Math.random(),room:"lobby"}),console.log("进入大厅")},accountLogin:function(){var t=this;this.$axios.$post("".concat("/v1","/auth/account_login"),{username:"lsl1",password:"123456"}).then((function(e){console.log(e.data),t.username=e.data.username})).catch((function(t){console.log(t.response.data)}))},logout:function(){var t=this;this.$axios.$delete("".concat("/v1","/auth/account_login")).then((function(e){console.log(e),t.username=""})).catch((function(t){console.log(t.response.data)}))}}},c=n(48),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container mt-3"},[n("h1",{staticClass:"text-center",staticStyle:{color:"red"}},[t._v("\n    欢迎使用中经网即时通信软件\n  ")]),t._v(" "),n("div",{staticClass:"border d-flex p-3 mb-3"},[n("div",{staticClass:"w-100"},[n("el-input",{staticClass:"mb-3 w-50",attrs:{placeholder:"请输入要发送的消息",size:"medium"},model:{value:t.current_msg,callback:function(e){t.current_msg=e},expression:"current_msg"}}),t._v(" "),n("div",{staticClass:"text-center"},[n("el-button",{staticClass:"w-10 ml-3",attrs:{type:"primary"},on:{click:t.sendMsg}},[t._v("\n          发送消息\n        ")]),t._v(" "),n("el-button",{staticClass:"w-10 ml-3",attrs:{type:"primary"},on:{click:t.enterLobby}},[t._v("\n          进入大厅\n        ")])],1),t._v(" "),n("el-input",{staticClass:"w-50 mt-3",attrs:{type:"textarea",autosize:{minRows:10},placeholder:"还没有消息"},model:{value:t.received_msgs,callback:function(e){t.received_msgs=e},expression:"received_msgs"}})],1)]),t._v(" "),n("h3",{staticClass:"text-center mt-3"},[t._v("登录(/v1/auth/login)")]),t._v(" "),n("div",{staticClass:"border p-3"},[n("el-button",{staticClass:"w-10 ml-5",attrs:{type:"primary"},on:{click:t.accountLogin}},[t._v("\n      账号登录\n    ")]),t._v(" "),n("el-button",{staticClass:"w-10 ml-5",attrs:{type:"primary"},on:{click:t.logout}},[t._v("\n      退出登录\n    ")])],1)])}),[],!1,null,"1fdca7c6",null);e.default=component.exports}}]);